(this["webpackJsonpanonym-chat"]=this["webpackJsonpanonym-chat"]||[]).push([[0],{79:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return J}));var n=a(9),r=a(1),c=a(14),o=a.n(c),i=(a(79),a(25)),s=a(53),l=a(17),u=a(37),d=a.n(u),j=a(45),h=a(125),b=a(130),p=a(131),m=a(132),x=a(133),O=a(134),f=a(49),g=a(138),y=a(135),v=a(128),w=a(29),C=a(59),k=a(28),D=Object(h.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"50px",overflowY:"none"},inline:{display:"inline",maxWidth:"600px"},notmyMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",backgroundColor:"red"}},myMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",flexDirection:"row-reverse",backgroundColor:"green"}}}),S=function(e){var t=e.auth,a=function(){var e=Object(j.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new k.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(a);case 3:n=e.sent,r=n.user,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"",children:Object(n.jsx)(y.a,{variant:"contained",color:"primary",type:"submit",onClick:a,children:"Logare"})})},I=[{path:"/login",Component:S}],W=[{path:"/",Component:function(){var e=D(),t=Object(r.useContext)(J),a=t.auth,c=t.firestore,o=Object(w.a)(a),s=Object(i.a)(o,1)[0],l=Object(r.useState)(""),u=Object(i.a)(l,2),h=u[0],S=u[1],I=Object(C.a)(c.collection("messages").orderBy("createDate")),W=Object(i.a)(I,2),A=W[0],B=W[1],E=Object(r.useCallback)(Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new RegExp("\\S"),!!t.test(h)&&h.length>0&&(c.collection("messages").add({uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,text:h,createDate:k.a.firestore.FieldValue.serverTimestamp()}),S(""));case 3:case"end":return e.stop()}}),e)}))),[h]);Object(r.useEffect)((function(){var e=document.getElementById("chatsMessages");e&&(e.scrollTop=9999999),console.log(A)}),[A]);var M={},N=function(e){M[e.keyCode]="keydown"==e.type,M[17]&&M[13]&&E()};return B?Object(n.jsx)(v.a,{disableShrink:!0}):Object(n.jsxs)(b.a,{children:[Object(n.jsx)(p.a,{container:!0,justify:"center",style:{marginTop:16},children:Object(n.jsx)("div",{id:"chatsMessages",style:{width:"100%",height:"60vh",border:"1px solid gray",overflowY:"auto",scrollTop:999999},children:Object(n.jsx)(m.a,{className:e.messageArea,children:A[0].createDate.seconds&&A.map((function(t){return Object(n.jsx)(x.a,{children:Object(n.jsx)(p.a,{item:!0,xs:12,align:s.uid===t.uid?"right":"left",children:Object(n.jsx)(O.a,{className:s.uid===t.uid?e.myMessage:e.notmyMessage,primary:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{multiline:!0,component:"span",variant:"body2",className:e.inline,color:"textPrimary",children:t.createDate&&new Date(t.createDate.seconds).toLocaleString().substring(12,17)}),t.text]})})})},t.createDate)}))})})}),Object(n.jsxs)(p.a,{container:!0,children:[Object(n.jsx)(g.a,{fullWidth:!0,onKeyDown:N,onKeyUp:N,multiline:!0,variant:"outlined",style:{width:"90%"},value:h,onChange:function(e){return S(e.target.value)}}),Object(n.jsx)(y.a,{onClick:E,fullWidth:!0,style:{width:"10%"},variant:"outlined",children:"Send"})]})]})}}],A=function(){var e=Object(r.useContext)(J).auth,t=Object(w.a)(e),a=Object(i.a)(t,1)[0]?W.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(l.b,{path:t,component:a,exact:!0},t)})):I.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(l.b,{path:t,component:a,exact:!0},t)}));return console.log(a),Object(n.jsxs)(l.d,{children:[a,Object(n.jsx)(l.a,{to:"/"})]})},B=a(136),E=a(137),M=function(){var e=Object(r.useContext)(J).auth,t=Object(w.a)(e),a=Object(i.a)(t,1)[0];return Object(n.jsx)(B.a,{color:"default",position:"static",children:Object(n.jsx)(E.a,{children:Object(n.jsxs)(p.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(f.a,{variant:"h6",color:"inherit",children:"Anonym Chat"}),a?Object(n.jsx)(y.a,{variant:"outlined",color:"secondary",onClick:function(){return e.signOut()},children:"Logout"}):Object(n.jsx)(S,{auth:e})]})})})};var N=function(){var e=Object(r.useContext)(J).auth,t=Object(w.a)(e),a=Object(i.a)(t,3),c=(a[0],a[1]);return a[2],Object(n.jsxs)(s.a,{basename:"/anonym-chat",children:[Object(n.jsx)(M,{}),c?Object(n.jsx)(v.a,{disableShrink:!0}):Object(n.jsx)(A,{})]})};a(91),a(92);k.a.initializeApp({apiKey:"AIzaSyDSfl9oycjIQyv3VuXy9110ms4JTTGYJAE",authDomain:"chat-anonym-5555.firebaseapp.com",projectId:"chat-anonym-5555",storageBucket:"chat-anonym-5555.appspot.com",messagingSenderId:"871012339222",appId:"1:871012339222:web:24186c163e2ae7e385af37",measurementId:"G-976SGBJ2EZ"});var T=k.a.auth(),G=k.a.firestore(),J=Object(r.createContext)(null);o.a.render(Object(n.jsx)(J.Provider,{value:{firebase:k.a,auth:T,firestore:G},children:Object(n.jsx)(N,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.1dc0e813.chunk.js.map
(this["webpackJsonpanonym-chat"]=this["webpackJsonpanonym-chat"]||[]).push([[0],{79:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return Y}));var n=a(8),c=a(1),r=a(14),o=a.n(r),s=(a(79),a(54)),i=a(25),l=a(17),u=a(134),d=a(37),j=a.n(d),h=a(46),b=a(124),m=a(137),p=a(129),x=a(29),O=a(28),f=function(){var e=Object(c.useContext)(Y),t=e.auth,a=e.firestore,r=Object(x.a)(t),o=Object(i.a)(r,1)[0],s=Object(c.useState)(""),l=Object(i.a)(s,2),u=l[0],d=l[1],f=Object(c.useCallback)(Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new RegExp("\\S"),!!t.test(u)&&u.length>0)try{a.collection("messages").add({uid:o.uid,displayName:o.displayName,photoURL:o.photoURL,text:u,createDate:O.a.firestore.FieldValue.serverTimestamp()}),d("")}catch(n){console.log(n)}case 3:case"end":return e.stop()}}),e)}))),[u]);return Object(n.jsxs)(b.a,{container:!0,children:[Object(n.jsx)(m.a,{defaultValue:"",fullWidth:!0,onKeyUp:function(e){13===e.keyCode&&f()},multiline:"true",variant:"outlined",style:{width:"80%"},value:u,onChange:function(e){return d(e.target.value)}}),Object(n.jsx)(p.a,{onClick:f,color:"primary",fullWidth:!0,style:{width:"10%"},variant:"outlined",children:"Send"}),Object(n.jsx)(p.a,{onClick:function(){a.collection("messages").get().then((function(e){e.forEach((function(e){e.ref.delete()}))}))},type:"button",color:"secondary",fullWidth:!0,style:{width:"10%"},variant:"outlined",children:"Erase"})]})},g=a(133),y=a(128),v=a(50),w=a(131),C=a(132),k=a(130),D=Object(k.a)({messagesArea:{height:"50px",overflowY:"none"},inline:{display:"inline",maxWidth:"600px"},notmyMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",backgroundColor:"red"}},myMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",flexDirection:"row-reverse",backgroundColor:"green"}}}),I=function(e){var t=D(),a=e.time;return Object(n.jsx)(v.a,{multiline:"true",component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:a})},M=function(e){var t=D(),a=e.itsMe,c=e.text,r=e.time;return Object(n.jsx)(w.a,{className:a?t.myMessage:t.notmyMessage,primary:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(I,{time:r}),c]})})},S=function(e){var t=D(),a=e.message,c=e.myId,r=new Date(a.createDate&&1e3*a.createDate.seconds+a.createDate.nanoseconds/1e6).toLocaleString().substring(12,17),o=a.text,s=c===a.uid;return Object(n.jsx)(C.a,{children:Object(n.jsx)(b.a,{item:!0,xs:12,align:s?"right":"left",children:Object(n.jsx)(w.a,{className:s?t.myMessage:t.notmyMessage,primary:Object(n.jsx)(M,{time:r,text:o,itsMe:s})})})},a.createDate)},W=a(63),E=function(){var e=Object(c.useState)([{text:"",createDate:{seconds:1}}]),t=Object(i.a)(e,2),a=t[0],r=(t[1],D()),o=Object(c.useContext)(Y),s=o.auth,l=o.firestore,u=Object(x.a)(s),d=Object(i.a)(u,1)[0],j=Object(W.a)(l.collection("messages").orderBy("createDate")),h=Object(i.a)(j,2),m=h[0],p=h[1];console.log("render Messages");return Object(c.useEffect)((function(){console.log("effect"),function(){var e=document.getElementById("chatsMessages");e&&(e.scrollTop=9999999)}()}),[a[a.length-1].createDate.seconds,a[a.length-1].createDate.nanoseconds]),Object(n.jsx)(b.a,{container:!0,justify:"center",style:{marginTop:16},children:Object(n.jsx)("div",{id:"chatsMessages",style:{width:"100%",height:"60vh",border:"1px solid gray",overflowY:"auto"},children:p?Object(n.jsx)(g.a,{disableShrink:!0}):Object(n.jsx)(y.a,{className:r.messagesArea,children:m.map((function(e){return Object(n.jsx)(S,{myId:d.uid,message:e},e.createDate&&e.createDate.seconds+""+e.createDate.nanoseconds)}))})})})},A=Object(k.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"}}),B=function(e){var t=e.auth,a=function(){var e=Object(h.a)(j.a.mark((function e(){var a,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new O.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(a);case 3:n=e.sent,c=n.user,console.log(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",onClick:a,children:"Login"})},N=[{path:"/login",Component:B}],G=[{path:"/",Component:function(){return A(),Object(n.jsxs)(u.a,{children:[Object(n.jsx)(E,{}),Object(n.jsx)(f,{})]})}}],J=function(){var e=Object(c.useContext)(Y).auth,t=Object(x.a)(e),a=Object(i.a)(t,1)[0]?G.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(l.b,{path:t,component:a,exact:!0},t)})):N.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(l.b,{path:t,component:a,exact:!0},t)}));return Object(n.jsxs)(l.d,{children:[a,Object(n.jsx)(l.a,{to:"/"})]})},L=a(135),R=a(136),T=function(){var e=Object(c.useContext)(Y).auth,t=Object(x.a)(e),a=Object(i.a)(t,1)[0];return Object(n.jsx)(L.a,{color:"default",position:"static",children:Object(n.jsx)(R.a,{children:Object(n.jsxs)(b.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(v.a,{variant:"h6",color:"inherit",children:"Anonym Chat"}),a?Object(n.jsx)(p.a,{variant:"outlined",color:"secondary",onClick:function(){return e.signOut()},children:"Logout"}):Object(n.jsx)(B,{auth:e})]})})})};var P=function(){return Object(n.jsxs)(s.a,{basename:"/anonym-chat",children:[Object(n.jsx)(T,{}),Object(n.jsx)(J,{})]})};a(91),a(92);O.a.initializeApp({apiKey:"AIzaSyDSfl9oycjIQyv3VuXy9110ms4JTTGYJAE",authDomain:"chat-anonym-5555.firebaseapp.com",projectId:"chat-anonym-5555",storageBucket:"chat-anonym-5555.appspot.com",messagingSenderId:"871012339222",appId:"1:871012339222:web:24186c163e2ae7e385af37",measurementId:"G-976SGBJ2EZ"});var U=O.a.auth(),V=O.a.firestore(),Y=Object(c.createContext)(null);o.a.render(Object(n.jsx)(Y.Provider,{value:{firebase:O.a,auth:U,firestore:V},children:Object(n.jsx)(P,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.2d9eca93.chunk.js.map
(this["webpackJsonpanonym-chat"]=this["webpackJsonpanonym-chat"]||[]).push([[0],{80:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t),a.d(t,"Context",(function(){return Y}));var n=a(8),r=a(1),c=a(14),s=a.n(c),o=(a(80),a(25)),i=a(54),u=a(17),l=a(37),j=a.n(l),d=a(45),b=a(131),h=a(135),m=a(134),p=a(29),x=a(60),O=a(28),g=a(125),f=a(138),y=a(130),v=function(e){var t=e.value,a=e.setValue,r=e.sendMessage,c=function(e){13===e.keyCode&&r()};return Object(n.jsxs)(g.a,{container:!0,children:[Object(n.jsx)(f.a,{defaultValue:"",fullWidth:!0,onKeyDown:c,onKeyUp:c,multiline:!0,variant:"outlined",style:{width:"90%"},value:t,onChange:function(e){return a(e.target.value)}}),Object(n.jsx)(y.a,{onClick:r,fullWidth:!0,style:{width:"10%"},variant:"outlined",children:"Send"})]})},w=a(129),C=a(49),k=a(132),D=a(133),M=Object(b.a)({inline:{display:"inline",maxWidth:"600px"},notmyMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",backgroundColor:"red"}},myMessage:{maxWidth:"600px",wordWrap:"break-word","& *":{display:"flex",flexDirection:"row-reverse",backgroundColor:"green"}}}),S=function(e){var t=M(),a=e.time;return Object(n.jsx)(C.a,{multiline:!0,component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:a})},I=function(e){var t=M(),a=e.itsMe,r=e.text,c=e.time;return Object(n.jsx)(k.a,{className:a?t.myMessage:t.notmyMessage,primary:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S,{time:c}),r]})})},W=function(e){var t=M(),a=e.message,r=e.myId,c=new Date(a.createDate&&1e3*a.createDate.seconds+a.createDate.nanoseconds/1e6).toLocaleString().substring(12,17),s=a.text,o=r===a.uid;return Object(n.jsx)(D.a,{children:Object(n.jsx)(g.a,{item:!0,xs:12,align:o?"right":"left",children:Object(n.jsx)(k.a,{className:o?t.myMessage:t.notmyMessage,primary:Object(n.jsx)(I,{time:c,text:s,itsMe:o})})})},a.createDate)},A=Object(b.a)({messageArea:{height:"50px",overflowY:"none"}}),B=function(e){var t=A(),a=e.messages,r=e.uid;return Object(n.jsx)(g.a,{container:!0,justify:"center",style:{marginTop:16},children:Object(n.jsx)("div",{id:"chatsMessages",style:{width:"100%",height:"60vh",border:"1px solid gray",overflowY:"auto"},children:Object(n.jsx)(w.a,{className:t.messageArea,children:a[0]&&a.map((function(e){return Object(n.jsx)(W,{myId:r,message:e})}))})})})},E=Object(b.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"}}),N=function(e){var t=e.auth,a=function(){var e=Object(d.a)(j.a.mark((function e(){var a,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new O.a.auth.GoogleAuthProvider,e.next=3,t.signInWithPopup(a);case 3:n=e.sent,r=n.user,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(y.a,{variant:"contained",color:"primary",type:"submit",onClick:a,children:"Login"})},G=[{path:"/login",Component:N}],J=[{path:"/",Component:function(){E();var e=Object(r.useContext)(Y),t=e.auth,a=e.firestore,c=Object(p.a)(t),s=Object(o.a)(c,1)[0],i=Object(r.useState)(""),u=Object(o.a)(i,2),l=u[0],b=u[1],g=((new Date).getSeconds(),Object(x.a)(a.collection("messages").orderBy("createDate"))),f=Object(o.a)(g,2),y=f[0],w=f[1],C=Object(r.useCallback)(Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new RegExp("\\S"),!!t.test(l)&&l.length>0)try{a.collection("messages").add({uid:s.uid,displayName:s.displayName,photoURL:s.photoURL,text:l,createDate:O.a.firestore.FieldValue.serverTimestamp()}),b("")}catch(n){console.log(n)}case 3:case"end":return e.stop()}}),e)}))),[l]);return Object(r.useEffect)((function(){var e=document.getElementById("chatsMessages");e&&(e.scrollTop=9999999)}),[y]),w?Object(n.jsx)(m.a,{disableShrink:!0}):Object(n.jsxs)(h.a,{children:[Object(n.jsx)(B,{uid:s.uid,messages:y}),Object(n.jsx)(v,{value:l,setValue:b,sendMessage:C})]})}}],L=function(){var e=Object(r.useContext)(Y).auth,t=Object(p.a)(e),a=Object(o.a)(t,1)[0]?J.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(u.b,{path:t,component:a,exact:!0},t)})):G.map((function(e){var t=e.path,a=e.Component;return Object(n.jsx)(u.b,{path:t,component:a,exact:!0},t)}));return console.log(a),Object(n.jsxs)(u.d,{children:[a,Object(n.jsx)(u.a,{to:"/"})]})},R=a(136),T=a(137),V=function(){var e=Object(r.useContext)(Y).auth,t=Object(p.a)(e),a=Object(o.a)(t,1)[0];return Object(n.jsx)(R.a,{color:"default",position:"static",children:Object(n.jsx)(T.a,{children:Object(n.jsxs)(g.a,{container:!0,justify:"space-between",children:[Object(n.jsx)(C.a,{variant:"h6",color:"inherit",children:"Anonym Chat"}),a?Object(n.jsx)(y.a,{variant:"outlined",color:"secondary",onClick:function(){return e.signOut()},children:"Logout"}):Object(n.jsx)(N,{auth:e})]})})})};var P=function(){var e=Object(r.useContext)(Y).auth,t=Object(p.a)(e),a=Object(o.a)(t,3),c=(a[0],a[1]);return a[2],Object(n.jsxs)(i.a,{basename:"/anonym-chat",children:[Object(n.jsx)(V,{}),c?Object(n.jsx)(m.a,{disableShrink:!0}):Object(n.jsx)(L,{})]})};a(92),a(93);O.a.initializeApp({apiKey:"AIzaSyDSfl9oycjIQyv3VuXy9110ms4JTTGYJAE",authDomain:"chat-anonym-5555.firebaseapp.com",projectId:"chat-anonym-5555",storageBucket:"chat-anonym-5555.appspot.com",messagingSenderId:"871012339222",appId:"1:871012339222:web:24186c163e2ae7e385af37",measurementId:"G-976SGBJ2EZ"});var K=O.a.auth(),U=O.a.firestore(),Y=Object(r.createContext)(null);s.a.render(Object(n.jsx)(Y.Provider,{value:{firebase:O.a,auth:K,firestore:U},children:Object(n.jsx)(P,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.2062dc28.chunk.js.map